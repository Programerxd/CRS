---
import '../styles/global.css';
import AdminSidebar from '../modules/admin/components/AdminSidebar';
import AdminGuard from '../modules/admin/components/AdminGuard'; 

interface Props {
  title: string;
}

const { title } = Astro.props;
const currentPath = Astro.url.pathname;
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    
    <link rel="icon" type="image/png" href="/favicon (2).png" />
    
    <title>{title} | Panel Admin</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
  </head>
  
  <body class="bg-gray-50 text-dark-600 font-body overflow-hidden">
    
    <AdminGuard client:only="react">
        
        <div class="flex h-screen">
            
           <AdminSidebar client:load currentPath={currentPath} />

            <div class="flex-1 flex flex-col lg:ml-64 transition-all duration-300 h-screen">
       
                <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-8 sticky top-0 z-20">
                    <h1 class="text-xl font-heading font-bold text-dark-900">
                        {title}
                    </h1>
                    <div class="flex items-center gap-4">
                        <a href="/" target="_blank" class="text-sm text-primary font-bold hover:underline">
                            Ver Sitio Web â†—
                        </a>
                    </div>
                </header>

                <main class="flex-1 overflow-y-auto p-6 md:p-8 scroll-smooth">
                    <div class="max-w-7xl mx-auto">
                        <slot />
                    </div>
                </main>

            </div>
        </div>

    </AdminGuard>

  </body>
</html>